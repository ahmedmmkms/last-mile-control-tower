# Step-by-Step Guide to Deploy and Test on Vercel

This guide provides detailed instructions for deploying your Last-Mile Delivery Control Tower application to Vercel and testing it.

## Prerequisites

1. A Vercel account (sign up at https://vercel.com)
2. Git installed on your local machine
3. Node.js installed on your local machine
4. Your project repository hosted on GitHub, GitLab, or Bitbucket

## Deployment Steps

### Step 1: Prepare Your Local Repository

1. Ensure all your changes are committed:
   ```bash
   git add .
   git commit -m "Prepare for Vercel deployment"
   ```

2. Push your changes to your remote repository:
   ```bash
   git push origin main
   ```

### Step 2: Connect Repository to Vercel

1. Log in to your Vercel account at https://vercel.com/login

2. Click on "New Project" button

3. Import your Git repository:
   - Click on "Continue with GitHub" (or your Git provider)
   - Authorize Vercel to access your repositories if prompted
   - Select the repository for your Last-Mile Delivery Control Tower project

4. Configure the project settings:
   - Project Name: last-mile-control-tower (or your preferred name)
   - Framework Preset: Other
   - Root Directory: Leave empty (project is at root)
   - Build Command: Leave empty (Vercel will automatically detect)
   - Output Directory: Leave empty (Vercel will automatically detect)

### Step 3: Configure Environment Variables

In the Vercel dashboard:
1. Go to your project settings
2. Navigate to "Environment Variables"
3. Add the following variables:
   - `DB_HOST`: Your database host (e.g., localhost or your DB service)
   - `DB_PORT`: Your database port (e.g., 5432 for PostgreSQL)
   - `DB_NAME`: Your database name
   - `DB_USER`: Your database user
   - `DB_PASSWORD`: Your database password
   - `API_BASE_URL`: Your API base URL (will be auto-generated by Vercel)
   - `NODE_ENV`: production

Note: For initial testing, you can use placeholder values, but for production you'll need real values.

### Step 4: Deploy Your Application

1. Click "Deploy" to start the deployment process
2. Vercel will:
   - Clone your repository
   - Install dependencies using `npm install`
   - Build your application
   - Deploy your application
3. Wait for the deployment to complete (usually takes 1-3 minutes)
4. Once deployment is complete, you'll see a success message with your application URL

### Step 5: Verify Deployment

1. Click on the URL provided by Vercel to view your deployed application
2. You should see the JSON response: `{"message": "Last-Mile Delivery Control Tower API"}`
3. Test the API endpoint by visiting your domain

## Testing Your Deployment

### Test 1: Basic API Response

1. Open your browser and navigate to your Vercel deployment URL
2. You should see: `{"message": "Last-Mile Delivery Control Tower API"}`
3. This confirms your API is running correctly

### Test 2: Using curl or Postman

1. Using curl:
   ```bash
   curl https://your-app-url.vercel.app/
   ```

2. Using Postman:
   - Create a GET request to your Vercel URL
   - Send the request
   - Verify you get the expected JSON response

### Test 3: Check Vercel Logs

1. In your Vercel dashboard, go to your project
2. Click on the "Logs" tab
3. Verify that requests to your API are being logged
4. Check for any errors in the logs

## Making Updates and Redeploying

1. Make changes to your code locally
2. Commit and push your changes:
   ```bash
   git add .
   git commit -m "Update API functionality"
   git push origin main
   ```
3. Vercel will automatically detect the changes and redeploy your application
4. Monitor the deployment progress in your Vercel dashboard

## Preview Deployments for Pull Requests

1. Create a new branch for your feature:
   ```bash
   git checkout -b feature/new-feature
   ```

2. Make your changes and commit them:
   ```bash
   git add .
   git commit -m "Add new feature"
   git push origin feature/new-feature
   ```

3. Create a Pull Request on GitHub
4. Vercel will automatically create a preview deployment
5. Test your changes using the preview URL
6. Merge the Pull Request when ready
7. Vercel will automatically deploy to production

## Troubleshooting Common Issues

### Issue 1: Deployment Fails

1. Check the build logs in the Vercel dashboard
2. Common causes:
   - Missing dependencies in package.json
   - Incorrect build commands
   - Syntax errors in your code

### Issue 2: Application Returns 500 Error

1. Check the Vercel logs for error messages
2. Verify all environment variables are correctly set
3. Ensure your database connection is working

### Issue 3: Application Not Updating

1. Verify your changes were pushed to the correct branch
2. Check that Vercel is set to deploy from the correct branch
3. Manually trigger a deployment in the Vercel dashboard if needed

## Next Steps

Once your basic deployment is working:
1. Implement your database schema in `src/database`
2. Add your API routes in `src/backend/routes`
3. Create your frontend application in `src/frontend`
4. Develop your mobile app in `src/mobile`

Each of these components can be developed and tested independently before integrating them into the full application.